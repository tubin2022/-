{"remainingRequest":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\src\\components\\ChangeUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\src\\components\\ChangeUser.vue","mtime":1656486339213},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\babel-loader\\lib\\index.js","mtime":1654243319214},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":1654243317945}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport qs from 'qs';\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      tableData: [],\n      current_page_data: [],\n      current_page: 1,\n      page_size: 3,\n      multipleSelection: [],\n      ids: [],\n      totalCount: 1,\n      imageUrl: '',\n      user: {\n        id: \"\",\n        uname: \"\",\n        gender: \"\",\n        email: \"\",\n        userface: \"\"\n      }\n    };\n  },\n  methods: {\n    init: function init(n1, n2) {\n      var _this = this; //把vue对象 先保存到第三方变量中\n\n\n      _this.current_page = n1, _this.page_size = n2, // 为给定 ID 的 user 创建请求\n      this.myAxios.get(\"http://localhost:8888/user/findUser?pageNo=\" + _this.current_page + \"&pageSize=\" + _this.page_size).then(function (response) {\n        console.log(response);\n        console.log(_this.page_size);\n        _this.tableData = response.data.data;\n\n        for (var i = 0; i < _this.tableData.data.length; i++) {\n          _this.tableData.data[i].visible = false;\n        }\n\n        _this.totalCount = response.data.data.total;\n        console.log(_this.tableData); // _this.onloads();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw); // console.log(imageUrl)\n\n      console.log(res.data.url);\n      this.user.userface = res.data.url;\n      console.log(this.user.userface);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      // 改变每页显示的条数 \n      this.page_size = val; // 注意：在改变每页显示的条数时，要将页码显示到第一页\n\n      this.current_page = 1; // console.log(this.page_size);\n\n      this.init(1, val);\n    },\n    // 显示第几页\n    handleCurrentChange: function handleCurrentChange(val) {\n      // 改变默认的页数\n      this.current_page = val;\n      this.init(this.current_page, this.page_size);\n    },\n    toggleSelection: function toggleSelection(rows) {\n      var _this2 = this;\n\n      if (rows) {\n        rows.forEach(function (row) {\n          _this2.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    handleEdit: function handleEdit(index, val) {\n      // console.log(index);\n      // console.log(val);\n      // console.log(val.visible);\n      // val.visible = !val.visible;\n      // console.log(this.tableData.data[index]);\n      this.tableData.data[index].visible = !this.tableData.data[index].visible;\n      this.user.id = this.tableData.data[index].uid;\n      this.user.uname = this.tableData.data[index].uname;\n      this.user.gender = this.tableData.data[index].gender;\n      this.user.username = this.tableData.data[index].username;\n      this.user.email = this.tableData.data[index].email;\n      this.user.userface = this.tableData.data[index].userface; // console.log(this.user);\n\n      this.$forceUpdate();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    updataSave: function updataSave(index, val) {\n      // console.log(index);\n      // console.log(val);\n      // console.log(val.visible);\n      // val.visible = !val.visible;\n      // console.log(this.tableData.data[index]);\n      this.tableData.data[index].visible = !this.tableData.data[index].visible;\n\n      var _this = this;\n\n      _this.user.id = this.tableData.data[index].uid;\n      this.myAxios.post('http://localhost:8888/user/modifyInfo', qs.stringify(_this.user)).then(function (response) {\n        // console.log(\"1\")\n        console.log(_this.user.uname);\n\n        if (response.data.code == \"1000\") {\n          _this.init(1, _this.page_size); // console.log(2222);\n\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.$forceUpdate();\n    }\n  },\n  created: function created() {\n    this.init(this.current_page, this.page_size);\n  }\n};",{"version":3,"sources":["ChangeUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA,OAAA,EAAA,MAAA,IAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,iBAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,CAJA;AAKA,MAAA,SAAA,EAAA,CALA;AAMA,MAAA,iBAAA,EAAA,EANA;AAOA,MAAA,GAAA,EAAA,EAPA;AAQA,MAAA,UAAA,EAAA,CARA;AASA,MAAA,QAAA,EAAA,EATA;AAUA,MAAA,IAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA;AALA;AAVA,KAAA;AAkBA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,EADA,EACA,EADA,EACA;AACA,UAAA,KAAA,GAAA,IAAA,CADA,CACA;;;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,EAAA,EACA,KAAA,CAAA,SAAA,GAAA,EADA,EAEA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,gDAAA,KAAA,CAAA,YAAA,GAAA,YAAA,GAAA,KAAA,CAAA,SAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,SAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,CAAA,EAAA,OAAA,GAAA,KAAA;AACA;;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,SAAA,EARA,CASA;AACA,OAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAdA,CAHA;AAkBA,KArBA;AAsBA,IAAA,mBAtBA,+BAsBA,GAtBA,EAsBA,IAtBA,EAsBA;AACA,WAAA,QAAA,GAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CADA,CAEA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA,CAAA,QAAA;AACA,KA5BA;AA6BA,IAAA,kBA7BA,8BA6BA,IA7BA,EA6BA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,YAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA;;AAEA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,aAAA,KAAA,IAAA,MAAA;AACA,KAxCA;AAyCA,IAAA,gBAzCA,4BAyCA,GAzCA,EAyCA;AACA;AACA,WAAA,SAAA,GAAA,GAAA,CAFA,CAGA;;AACA,WAAA,YAAA,GAAA,CAAA,CAJA,CAKA;;AACA,WAAA,IAAA,CAAA,CAAA,EAAA,GAAA;AACA,KAhDA;AAiDA;AACA,IAAA,mBAlDA,+BAkDA,GAlDA,EAkDA;AACA;AACA,WAAA,YAAA,GAAA,GAAA;AACA,WAAA,IAAA,CAAA,KAAA,YAAA,EAAA,KAAA,SAAA;AACA,KAtDA;AAuDA,IAAA,eAvDA,2BAuDA,IAvDA,EAuDA;AAAA;;AACA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,kBAAA,CAAA,GAAA;AACA,SAFA;AAGA,OAJA,MAIA;AACA,aAAA,KAAA,CAAA,aAAA,CAAA,cAAA;AACA;AACA,KA/DA;AAgEA,IAAA,UAhEA,sBAgEA,KAhEA,EAgEA,GAhEA,EAgEA;AACA;AACA;AACA;AACA;AAEA;AACA,WAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA,GAAA,CAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA;AACA,WAAA,IAAA,CAAA,EAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,GAAA;AACA,WAAA,IAAA,CAAA,KAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,KAAA;AACA,WAAA,IAAA,CAAA,MAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,MAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,QAAA;AACA,WAAA,IAAA,CAAA,KAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,KAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,QAAA,CAbA,CAcA;;AACA,WAAA,YAAA;AAEA,KAjFA;AAkFA,IAAA,qBAlFA,iCAkFA,GAlFA,EAkFA;AACA,WAAA,iBAAA,GAAA,GAAA;AACA,KApFA;AAqFA,IAAA,UArFA,sBAqFA,KArFA,EAqFA,GArFA,EAqFA;AACA;AACA;AACA;AACA;AACA;AACA,WAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA,GAAA,CAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,OAAA;;AACA,UAAA,KAAA,GAAA,IAAA;;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,EAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,KAAA,EAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,uCAAA,EACA,EAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA;;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,CAAA,EAAA,KAAA,CAAA,SAAA,EADA,CAEA;;AACA;AACA,OATA,EAUA,KAVA,CAUA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAZA;AAaA,WAAA,YAAA;AAEA;AA7GA,GArBA;AAoIA,EAAA,OApIA,qBAoIA;AACA,SAAA,IAAA,CAAA,KAAA,YAAA,EAAA,KAAA,SAAA;AACA;AAtIA,CAAA","sourcesContent":["<template>\r\n\t<div style=\" height: 100%;\">\r\n\t\t<div class=\"top\">\r\n\t\t\t更改用户\r\n\t\t</div>\r\n\t\t<div style=\"text-align: center;margin: 0 auto;\">\r\n\t\t\t<el-card class=\"center\" align=\"center\" style=\"width: 820px;margin: auto\">\r\n\t\t\t\t<el-table ref=\"multipleTable\" :data=\"tableData.data\" stripe :default-sort=\"{prop:'date',order:'descsexing'}\"\r\n\t\t\t\t\ttooltip-effect=\"dark\" style=\"width: 100%;text-align: center;margin: auto;\"\r\n\t\t\t\t\t:header-cell-style=\"{'text-align':'center'}\" \r\n\t\t\t\t\t:cell-style=\"{'text-align':'center'}\"\r\n\t\t\t\t\t@selection-change=\"handleSelectionChange\">\r\n\t\t\t\t\t<el-table-column sortable label=\"UID\" width=\"80\" prop=\"uid\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{{ scope.row.uid }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"uname\" label=\"姓名\" width=\"90\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t\t{{ scope.row.uname }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<el-input v-model=\"user.uname\" style=\"width: 80px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"gender\" label=\"性别\" width=\"90px\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t\t{{ scope.row.gender }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<el-input v-model=\"user.gender\" style=\"width: 80px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"username\" label=\"电话号码\" width=\"130px\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{{ scope.row.username }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"email\" label=\"邮箱\" width=\"180px\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t\t{{ scope.row.email }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<el-input v-model=\"user.email\" style=\"width: 160px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"userface\" label=\"用户头像\" width=\"120px\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<!-- <img :src=\"require('{{ scope.row.userface }}')\"> -->\r\n\t\t\t\t\t\t\t<el-popover placement=\"top-start\" title=\"\" trigger=\"hover\" v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t      <img :src=\"scope.row.userface\" alt=\"\" style=\"width: 200px;height: 200px\">\r\n\t\t\t\t\t\t\t      <el-avatar slot=\"reference\" :src=\"scope.row.userface\" style=\"width: 70px;height: 70px\" shape=\"circle\"\r\n\t\t\t\t\t\t\t      fit=\"cover\">\r\n\t\t\t\t\t\t\t      </el-avatar>\r\n\t\t\t\t\t\t\t    </el-popover>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<el-upload style=\"margin: auto;width: 90px;\" class=\"avatar-uploader\" action=\"http://localhost:8888/file/upload\"\r\n\t\t\t\t\t\t\t\t:show-file-list=\"false\" :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"user.userface\" class=\"avatar\">\r\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"85\" fixed=\"right\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-button type=\"success\" v-if=\"scope.row.visible\" size=\"mini\"\r\n\t\t\t\t\t\t\t\t@click=\"updataSave(scope.$index, scope.row)\">确定</el-button>\r\n\t\t\t\t\t\t\t<el-button size=\"mini\" v-if=\"!scope.row.visible\" @click=\"handleEdit(scope.$index, scope.row)\">编辑\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\r\n\t\t\t\t</el-table>\r\n\t\t\t\t\r\n\t\t\t\t<div style=\"text-align: center;margin-top: 20px;\">\r\n\t\t\t\t\t<el-pagination @size-change=\"handleSizeChange\"\r\n\t\t\t\t\t                          @current-change=\"handleCurrentChange\" \r\n\t\t\t\t\t                          :current-page=\"current_page\" \r\n\t\t\t\t\t                          :page-sizes=\"[2,3,4,5]\" \r\n\t\t\t\t\t                          :page-size.sync=\"page_size\" layout=\"total, sizes, prev, pager, next, jumper\" \r\n\t\t\t\t\t                          :total=\"totalCount\">\r\n\t\t\t\t\t</el-pagination>\r\n\t\t\t\t</div>\r\n\t\t\t</el-card>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport qs from 'qs';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tcurrent_page_data: [],\r\n\t\t\t\tcurrent_page: 1,\r\n\t\t\t\tpage_size: 3,\r\n\t\t\t\tmultipleSelection: [],\r\n\t\t\t\tids: [],\r\n\t\t\t\ttotalCount:1,\r\n\t\t\t\timageUrl:'',\r\n\t\t\t\tuser:{\r\n\t\t\t\t\tid:\"\",\r\n\t\t\t\t\tuname:\"\",\r\n\t\t\t\t\tgender:\"\",\r\n\t\t\t\t\temail:\"\",\r\n\t\t\t\t\tuserface:\"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit(n1,n2) {\r\n\t\t\t\tlet _this = this; //把vue对象 先保存到第三方变量中\r\n\t\t\t\t_this.current_page=n1,\r\n\t\t\t\t_this.page_size=n2,\r\n\t\t\t\t// 为给定 ID 的 user 创建请求\r\n\t\t\t\tthis.myAxios.get(\"http://localhost:8888/user/findUser?pageNo=\"+_this.current_page+\"&pageSize=\"+_this.page_size)\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\tconsole.log(_this.page_size);\r\n\t\t\t\t\t\t_this.tableData = response.data.data;\r\n\t\t\t\t\t\tfor (var i = 0; i < _this.tableData.data.length; i++) {\r\n\t\t\t\t\t\t\t_this.tableData.data[i].visible = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.totalCount=response.data.data.total;\r\n\t\t\t\t\t\tconsole.log(_this.tableData);\r\n\t\t\t\t\t\t// _this.onloads();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleAvatarSuccess(res, file) {\r\n\t\t\t\tthis.imageUrl = URL.createObjectURL(file.raw);\r\n\t\t\t\t// console.log(imageUrl)\r\n\t\t\t\tconsole.log(res.data.url)\r\n\t\t\t\tthis.user.userface = res.data.url\r\n\t\t\t\tconsole.log(this.user.userface)\r\n\t\t\t},\r\n\t\t\tbeforeAvatarUpload(file) {\r\n\t\t\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\r\n\t\t\t\tif (!isJPG) {\r\n\t\t\t\t\tthis.$message.error('上传头像图片只能是 JPG 格式!');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJPG && isLt2M;\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t           // 改变每页显示的条数 \r\n\t\t\t           this.page_size=val\r\n\t\t\t           // 注意：在改变每页显示的条数时，要将页码显示到第一页\r\n\t\t\t           this.current_page=1\r\n\t\t\t\t\t   // console.log(this.page_size);\r\n\t\t\t\t\t   this.init(1,val)\r\n\t\t\t       },\r\n\t\t\t         // 显示第几页\r\n\t\t\t       handleCurrentChange(val) {\r\n\t\t\t           // 改变默认的页数\r\n\t\t\t           this.current_page=val;\r\n\t\t\t\t\t   this.init(this.current_page,this.page_size);\r\n\t\t\t       },\r\n\t\t\ttoggleSelection(rows) {\r\n\t\t\t\tif (rows) {\r\n\t\t\t\t\trows.forEach(row => {\r\n\t\t\t\t\t\tthis.$refs.multipleTable.toggleRowSelection(row);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$refs.multipleTable.clearSelection();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleEdit(index, val) {\r\n\t\t\t\t// console.log(index);\r\n\t\t\t\t// console.log(val);\r\n\t\t\t\t// console.log(val.visible);\r\n\t\t\t\t// val.visible = !val.visible;\r\n\t\t\t\r\n\t\t\t\t// console.log(this.tableData.data[index]);\r\n\t\t\t\tthis.tableData.data[index].visible = !this.tableData.data[index].visible\r\n\t\t\t\tthis.user.id = this.tableData.data[index].uid\r\n\t\t\t\tthis.user.uname = this.tableData.data[index].uname\r\n\t\t\t\tthis.user.gender = this.tableData.data[index].gender\r\n\t\t\t\tthis.user.username = this.tableData.data[index].username\r\n\t\t\t\tthis.user.email = this.tableData.data[index].email\r\n\t\t\t\tthis.user.userface = this.tableData.data[index].userface\r\n\t\t\t\t// console.log(this.user);\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\thandleSelectionChange(val) {\r\n\t\t\t\tthis.multipleSelection = val;\r\n\t\t\t},\r\n\t\t\tupdataSave(index, val) {\r\n\t\t\t\t// console.log(index);\r\n\t\t\t\t// console.log(val);\r\n\t\t\t\t// console.log(val.visible);\r\n\t\t\t\t// val.visible = !val.visible;\r\n\t\t\t\t// console.log(this.tableData.data[index]);\r\n\t\t\t\tthis.tableData.data[index].visible = !this.tableData.data[index].visible\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t_this.user.id = this.tableData.data[index].uid\r\n\t\t\t\tthis.myAxios.post('http://localhost:8888/user/modifyInfo',\r\n\t\t\t\t\t qs.stringify(_this.user))\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t// console.log(\"1\")\r\n\t\t\t\t\t\tconsole.log(_this.user.uname)\r\n\t\t\t\t\t\tif (response.data.code == \"1000\") {\r\n\t\t\t\t\t\t\t_this.init(1, _this.page_size);\r\n\t\t\t\t\t\t\t// console.log(2222);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t  this.init(this.current_page,this.page_size)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.top {\r\n\t\t/* margin-top: 10px; */\r\n\t\tmargin: auto;\r\n\t\tfont-size: 34px;\r\n\t\tcolor: rgb(154, 217, 217);\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\theight: 50px;\r\n\t\t/* background-color: rgb(253, 255, 254); */\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}