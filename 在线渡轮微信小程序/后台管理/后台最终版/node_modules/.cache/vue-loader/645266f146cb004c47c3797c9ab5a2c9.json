{"remainingRequest":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Tubin\\Desktop\\后台\\src\\components\\Stock.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Tubin\\Desktop\\后台\\src\\components\\Stock.vue","mtime":1656344771868},{"path":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\css-loader\\index.js","mtime":1654243307080},{"path":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1654243317953},{"path":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\postcss-loader\\src\\index.js","mtime":1654243319008},{"path":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"C:\\Users\\Tubin\\Desktop\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":1654243317945}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.top {\n\t/* margin-top: 10px; */\n\tmargin: auto;\n\tfont-size: 34px;\n\tcolor: rgb(154, 217, 217);\n\tfont-weight: bold;\n\ttext-align: center;\n\theight: 50px;\n\t/* background-color: rgb(253, 255, 254); */\n}\n",{"version":3,"sources":["Stock.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Stock.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div style=\" height: 100%;\">\r\n\t\t<div class=\"top\">\r\n\t\t\t票务库存信息\r\n\t\t</div>\r\n\t\t<el-card>\r\n\t\t\t<div style=\"text-align: center;\">\r\n\t\t\t\t\t<el-input type=\"text\" placeholder=\"始发站\" v-model=\"queryTicket.startCity\" style=\"width:120px;\" clearable>\r\n\t\t\t\t</el-input>&nbsp;\r\n\t\t\t\t<el-input type=\"text\" placeholder=\"终点站\" v-model=\"queryTicket.endCity\" style=\"width:120px;\" clearable>\r\n\t\t\t\t</el-input>&nbsp;\r\n\t\t\t\t<el-date-picker v-model=\"queryTicket.startTime\" type=\"date\" placeholder=\"出发时间\"\r\n\t\t\t\t\tstyle=\"width: 200px\" value-format=\"yyyy-MM-dd\">\r\n\t\t\t\t</el-date-picker>&nbsp;\r\n\t\t\t\t<el-date-picker v-model=\"queryTicket.endTime\" type=\"date\" placeholder=\"到达时间\"\r\n\t\t\t\t\tstyle=\"width: 200px\" value-format=\"yyyy-MM-dd\">\r\n\t\t\t\t</el-date-picker>&nbsp;\r\n\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchTicket\">查询</el-button>\r\n\t\t\t<el-button  @click=\"add\" v-if=\"!visible\">添加船票</el-button>\r\n\t\t\t<el-button type=\"primary\" @click=\"addTicket\" v-if=\"visible\">保存船票\r\n\t\t\t</el-button>\r\n\t\t\t</div><br>\r\n\t\t\t<div style=\"text-align: center;\" v-if=\"visible\">\r\n\t\t\t\t<el-input type=\"text\" placeholder=\"渡轮编号\" v-model=\"ticket.bid\" style=\"width:120px;\" clearable>\r\n\t\t\t\t</el-input>&nbsp;\r\n\t\t\t\t<el-input type=\"text\" placeholder=\"班次编号\" v-model=\"ticket.sid\" style=\"width:120px;\" clearable>\r\n\t\t\t\t</el-input>&nbsp;\r\n\t\t\t\t<el-input type=\"text\" placeholder=\"船票价格\" v-model=\"ticket.price\" style=\"width:120px;\" clearable>\r\n\t\t\t\t</el-input>&nbsp;<br>\r\n\t\t\t</div>\r\n\t\t\t<el-table ref=\"multipleTable\" :data=\"tableData.data\" stripe :default-sort=\"{prop:'date',order:'descending'}\"\r\n\t\t\t\ttooltip-effect=\"dark\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\"\r\n\t\t\t\t:header-cell-style=\"{'text-align':'center'}\"\r\n\t\t\t\t:cell-style=\"{'text-align':'center'}\">\r\n\t\t\t\t<el-table-column fixed=\"left\" type=\"selection\" width=\"55\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column sortable label=\"班次\" width=\"90\" prop=\"shift.sid\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.shift.sid }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column sortable label=\"轮船编号\" width=\"120\" prop=\"boat.bid\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t{{ scope.row.boat.bid }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<el-input v-model=\"stock.bid\" style=\"width: 80px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column sortable label=\"船票编号\" width=\"120\" prop=\"tid\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t{{ scope.row.tid }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<el-input v-model=\"stock.tid\" style=\"width: 80px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"shift.startCity\" label=\"始发站\" sortable width=\"90px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.shift.startCity }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"shift.endCity\" label=\"终点站\" width=\"90px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.shift.endCity }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"price\" label=\"票价\" width=\"90px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span v-if=\"!scope.row.visible\">\r\n\t\t\t\t\t\t\t{{ scope.row.price }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<el-input v-model=\"stock.price\" style=\"width: 80px;\" v-if=\"scope.row.visible\">\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"shift.startTime\" label=\"出发时间\" width=\"290px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.shift.startTime | dateFormat('YYYY-MM-DD HH:mm')}}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"shift.endTime\" label=\"到达时间\" width=\"290px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.shift.endTime | dateFormat('YYYY-MM-DD HH:mm')}}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"total\" label=\"核载人数\" width=\"90px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.total }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"surplus\" label=\"余票\" width=\"90px\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ scope.row.surplus }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"success\" v-if=\"scope.row.visible\" size=\"mini\"\r\n\t\t\t\t\t\t\t@click=\"updataSave(scope.$index, scope.row)\">保存</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" v-if=\"!scope.row.visible\" @click=\"handleEdit(scope.$index, scope.row)\">编辑\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"delStock(scope.row.tid)\">删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div style=\"margin-top: 20px;text-align: center;\">\r\n\t\t\t\t<el-button @click=\"toggleSelection()\">取消选择</el-button>\r\n\t\t\t\t<el-button type=\"warning\" @click=\"handleBatchDelete\">批量删除</el-button>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"text-align: center;margin-top: 20px;\">\r\n\t\t\t\t<el-pagination @size-change=\"handleSizeChange\"\r\n\t\t\t\t                          @current-change=\"handleCurrentChange\" \r\n\t\t\t\t                          :current-page=\"current_page\" \r\n\t\t\t\t                          :page-sizes=\"[3,4,5,6]\" \r\n\t\t\t\t                          :page-size.sync=\"page_size\" layout=\"total, sizes, prev, pager, next, jumper\" \r\n\t\t\t\t                          :total=\"totalCount\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport qs from 'qs';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tdata:[],\r\n\t\t\t\tcurrent_page_data: [],\r\n\t\t\t\tcurrent_page: 1,\r\n\t\t\t\tpage_size: 4,\r\n\t\t\t\tmultipleSelection: [],\r\n\t\t\t\tids: [],\r\n\t\t\t\ttotalCount:1,\r\n\t\t\t\tstock:{\r\n\t\t\t\t\ttid:'',\r\n\t\t\t\t\tbid:'',\r\n\t\t\t\t\tprice:''\r\n\t\t\t\t},\r\n\t\t\t\tticket:{\r\n\t\t\t\t\tbid:\"\",\r\n\t\t\t\t\tsid:\"\",\r\n\t\t\t\t\tprice:\"\"\r\n\t\t\t\t},\r\n\t\t\t\tqueryTicket:{\r\n\t\t\t\t\tstartCity:\"\",\r\n\t\t\t\t\tendCity:\"\",\r\n\t\t\t\t\tstartTime:\"\",\r\n\t\t\t\t\tendTime:\"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t\tinit(n1,n2) {\r\n\t\t\t\t\tlet _this = this; //把vue对象 先保存到第三方变量中\r\n\t\t\t\t\t_this.current_page=n1,\r\n\t\t\t\t\t_this.page_size=n2,\r\n\t\t\t\t\tthis.myAxios.get(\"http://localhost:8888/ticket/pageQueryTicket?pageNo=\"+_this.current_page+\"&pageSize=\"+_this.page_size)\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tconsole.log(_this.page_size);\r\n\t\t\t\t\t\t\t_this.tableData = response.data.data;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _this.tableData.data.length; i++) {\r\n\t\t\t\t\t\t\t\t_this.tableData.data[i].visible = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.totalCount=response.data.data.total;\r\n\t\t\t\t\t\t\tconsole.log(_this.tableData);\r\n\t\t\t\t\t\t\t// _this.onloads();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t},\r\n\t\t\t\tadd() {\r\n\t\t\t\t\tthis.visible = !this.visible;\r\n\t\t\t\t},\r\n\t\t\t\tasync addTicket() {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tawait this.myAxios.post('http://localhost:8888/ticket/addTicket',\r\n\t\t\t\t\tqs.stringify(_this.ticket))\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t_this.data = response.data;\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tif (response.data == \"success\") {\r\n\t\t\t\t\t\t\t\t_this.init();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(this.data.msg)\r\n\t\t\t\t\t\tif(this.data.code == \"3001\"){\r\n\t\t\t\t\t\t\tthis.$alert(this.data.msg, {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.visible = !this.visible;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(this.data.code == \"1000\"){\r\n\t\t\t\t\t\t\tthis.$alert(this.data.msg, {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.visible = !this.visible;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\tthis.visible = !this.visible;\r\n\t\t\t\t},\r\n\t\t\t\thandleSizeChange(val) {\r\n\t\t\t\t           // 改变每页显示的条数 \r\n\t\t\t\t           this.page_size=val\r\n\t\t\t\t           // 注意：在改变每页显示的条数时，要将页码显示到第一页\r\n\t\t\t\t           this.current_page=1\r\n\t\t\t\t\t\t   // console.log(this.page_size);\r\n\t\t\t\t\t\t   this.init(1,val)\r\n\t\t\t\t       },\r\n\t\t\t\t         // 显示第几页\r\n\t\t\t\t       handleCurrentChange(val) {\r\n\t\t\t\t           // 改变默认的页数\r\n\t\t\t\t           this.current_page=val;\r\n\t\t\t\t\t\t   this.init(this.current_page,this.page_size);\r\n\t\t\t\t       },\r\n\t\t\t\ttoggleSelection(rows) {\r\n\t\t\t\t\tif (rows) {\r\n\t\t\t\t\t\trows.forEach(row => {\r\n\t\t\t\t\t\t\tthis.$refs.multipleTable.toggleRowSelection(row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$refs.multipleTable.clearSelection();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\thandleSelectionChange(val) {\r\n\t\t\t\t\tthis.multipleSelection = val;\r\n\t\t\t\t},\r\n\t\t\t\thandleEdit(index, val) {\r\n\t\t\t\t\tconsole.log(index);\r\n\t\t\t\t\tconsole.log(val);\r\n\t\t\t\t\tthis.tableData.data[index].visible = !this.tableData.data[index].visible\r\n\t\t\t\t\tthis.stock.tid = this.tableData.data[index].tid\r\n\t\t\t\t\tthis.stock.bid = this.tableData.data[index].boat.bid\r\n\t\t\t\t\tthis.stock.price = this.tableData.data[index].price\r\n\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t},\r\n\t\t\t\tupdataSave(index, val){\r\n\t\t\t\t\tthis.tableData.data[index].visible = !this.tableData.data[index].visible\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tthis.myAxios.post('http://localhost:8888/ticket/updateTicket',\r\n\t\t\t\t\t\t qs.stringify(_this.stock))\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\tconsole.log(\"1\")\r\n\t\t\t\t\t\t\tconsole.log(_this.stock.bid)\r\n\t\t\t\t\t\t\tconsole.log(_this.stock.sid)\r\n\t\t\t\t\t\t\tconsole.log(_this.stock.price)\r\n\t\t\t\t\t\t\t// console.log(_this.stock.endTime)\r\n\t\t\t\t\t\t\t    // console.log(response);\r\n\t\t\t\t\t\t\tif (response.data.code == \"1000\") {\r\n\t\t\t\t\t\t\t\t_this.init(_this.current_page, _this.page_size);\r\n\t\t\t\t\t\t\t\t// console.log(2222);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t},\r\n\t\t\t\thandleBatchDelete() {\r\n\t\t\t\t\tif (this.multipleSelection.length) {\r\n\t\t\t\t\t\tfor (let i = 0; i < this.multipleSelection.length; i++) {\r\n\t\t\t\t\t\t\tthis.ids[i] = this.multipleSelection[i].tid;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$alert(\"请选择数据\", \"提示\", {\r\n\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let i = 0; i < this.multipleSelection.length; i++){\r\n\t\t\t\t\t    console.log(this.ids[i]);\r\n\t\t\t\t\t\tlet _this = this\r\n\t\t\t\t\t\t// console.log(sid)\r\n\t\t\t\t\t\tthis.myAxios.post('http://localhost:8888/ticket/deleteTicket?tid='+this.ids[i])\r\n\t\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t\t// console.log(response);\r\n\t\t\t\t\t\t\t\t_this.msg = response.data.msg\r\n\t\t\t\t\t\t\t\t// console.log(_this.msg)\r\n\t\t\t\t\t\t\t\talert(_this.msg)\r\n\t\t\t\t\t\t\t\tif (response.data.code == \"1000\") {\r\n\t\t\t\t\t\t\t\t\t_this.init(_this.current_page, _this.page_size);\r\n\t\t\t\t\t\t\t\t\t// console.log(2222);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t// console.log(sid);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdelStock(tid) {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\t// console.log(sid)\r\n\t\t\t\t\tthis.myAxios.post('http://localhost:8888/ticket/deleteTicket?tid='+tid)\r\n\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t// console.log(response);\r\n\t\t\t\t\t\t\t_this.msg = response.data.msg\r\n\t\t\t\t\t\t\t// console.log(_this.msg)\r\n\t\t\t\t\t\t\talert(_this.msg)\r\n\t\t\t\t\t\t\tif (response.data.code == \"1000\") {\r\n\t\t\t\t\t\t\t\t_this.init(_this.current_page, _this.page_size);\r\n\t\t\t\t\t\t\t\t// console.log(2222);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t// console.log(sid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t},\r\n\t\t\t\tsearchTicket(){\r\n\t\t\t\t\t\tconsole.log(this.queryTicket);\r\n\t\t\t\t\t\t\tlet typei=0;\r\n\t\t\t\t\t\t\tlet qurry =\"http://localhost:8888/ticket/pageQueryTicket?\"+\"pageNo=\"+this.current_page+\"&pageSize=\"+this.page_size;\r\n\t\t\t\t\t\t\tif(this.queryTicket.startCity!=\"\"){\r\n\t\t\t\t\t\t\t\tqurry+=\"&startCity=\"+this.queryTicket.startCity;\r\n\t\t\t\t\t\t\t\ttypei = 1;\r\n\t\t\t\t\t\t\t\tconsole.log(\"sb1\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.queryTicket.endCity!=\"\" ){\r\n\t\t\t\t\t\t\t\tqurry+=\"&arriveCity=\"+this.queryTicket.endCity;\r\n\t\t\t\t\t\t\t\ttypei = 1;\r\n\t\t\t\t\t\t\t\tconsole.log(\"sb2\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.queryTicket.startTime!=\"\" &&this.queryTicket.startTime!=undefined){\r\n\t\t\t\t\t\t\t\tqurry+=\"&startTime=\"+this.queryTicket.startTime;\r\n\t\t\t\t\t\t\t\ttypei = 1;\r\n\t\t\t\t\t\t\t\tconsole.log(\"sb3\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(this.queryTicket.endTime!=\"\" &&this.queryTicket.endTime!=undefined){\r\n\t\t\t\t\t\t\t\tqurry+=\"&arriveime=\"+this.queryTicket.endTime;\r\n\t\t\t\t\t\t\t\ttypei = 1;\r\n\t\t\t\t\t\t\t\tconsole.log(\"sb4\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(this.queryTicket.startCity);\r\n\t\t\t\t\t\t\tconsole.log(this.queryTicket.endCity);\r\n\t\t\t\t\t\t\tconsole.log(this.queryTicket.startTime);\r\n\t\t\t\t\t\t\tconsole.log(this.queryTicket.endTime);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log(\"typei=\"+typei);\r\n\t\t\t\t\t\t\tif(typei==0){\r\n\t\t\t\t\t\t\t\tthis.$alert(\"请输入查询条件\", {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\ttypei =0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet _this = this; //把vue对象 先保存到第三方变量中\r\n\t\t\t\t\t\t\t// 为给定 ID 的 user 创建请求\r\n\t\t\t\t\t\t\tthis.myAxios.get(qurry)\r\n\t\t\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\t\t\tconsole.log(_this.page_size);\r\n\t\t\t\t\t\t\t\t\t_this.tableData = response.data.data;\r\n\t\t\t\t\t\t\t\t\t_this.totalCount=response.data.data.total;\r\n\t\t\t\t\t\t\t\t\tconsole.log(_this.totalCount)\r\n\t\t\t\t\t\t\t\t\tconsole.log(_this.tableData);\r\n\t\t\t\t\t\t\t\t\t// if (response.data.code == \"1000\") {\r\n\t\t\t\t\t\t\t\t\t// \t_this.init(_this.current_page, _this.page_size);\r\n\t\t\t\t\t\t\t\t\t// \t// console.log(2222);\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t// _this.onloads();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\tcreated(){\r\n\t\t\r\n\t\t\t\t\t\t\t// this.onloads();\r\n\t\t\t\tthis.init(this.current_page,this.page_size)\r\n\t\t\t}\r\n\t\t}\r\n</script>\r\n\r\n<style>\r\n\t.top {\r\n\t\t/* margin-top: 10px; */\r\n\t\tmargin: auto;\r\n\t\tfont-size: 34px;\r\n\t\tcolor: rgb(154, 217, 217);\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\theight: 50px;\r\n\t\t/* background-color: rgb(253, 255, 254); */\r\n\t}\r\n</style>\r\n"]}]}