{"remainingRequest":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\src\\components\\Statistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\src\\components\\Statistics.vue","mtime":1656520673474},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\node_modules\\babel-loader\\lib\\index.js","mtime":1654243319214},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"C:\\Users\\孤岛蓝鲸\\Desktop\\后台最终版\\node_modules\\vue-loader\\lib\\index.js","mtime":1654243317945}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn{\n\t\t\t//日期参数\n\t\t\tdate:'',\n\t\t\t//每天售票统计数据，分别为路线，已售票数，未售票数（即剩余票数）\n\t\t\tline:[],\n\t\t\tsaled:[],\n\t\t\tsurplus:[],\n\t\t\t//每天城市发出班次统计数据\n\t\t\tshifts:[]\n\t\t}\n\t},\n\t\n\tmethods:{\n\t\t//绘制每天售票情况统计图\n\t\tdrawCharts(line,saled,surplus){\n\t\t\tlet that = this;\n\t\t\t // 基于准备好的dom，初始化echarts实例\n\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsTicket'));\n\t\t\t\n\t\t\tlet  option = {\n\t\t\t    backgroundColor:'#f5fffe',\n\t\t\t    tooltip:{\n\t\t\t      trigger:'axis'  \n\t\t\t    },\n\t\t\t    legend: {\n\t\t\t        data: ['已售票数', '未售票数'],\n\t\t\t        textStyle:{\n\t\t\t            color:'#02c4ef'\n\t\t\t        }\n\t\t\t    },\n\t\t\t    grid: {\n\t\t\t        left: '3%',\n\t\t\t        right: '4%',\n\t\t\t        bottom: '3%',\n\t\t\t        containLabel: true\n\t\t\t    },\n\t\t\t    xAxis:  {\n\t\t\t        type: 'category',\n\t\t\t        data: line,\n\t\t\t        axisTick: { show: false },\n\t\t\t        axisLine: {\n\t\t\t            show: true,\n\t\t\t            lineStyle:{\n\t\t\t                color:'#58f1f3'\n\t\t\t            },\n\t\t\t        },\n\t\t\t        axisLabel: { \n\t\t\t            show:true,\n\t\t\t            textStyle:{\n\t\t\t                color:'#215ae0',\n\t\t\t                fontSize:12,\n\t\t\t            },\n\t\t\t            //rotate:30\n\t\t\t        }\n\t\t\t    },\n\t\t\t    yAxis: {\n\t\t\t        type: 'value',\n\t\t\t        splitLine: {show: true,\n\t\t\t            lineStyle:{\n\t\t\t                color:'#a5ffff'\n\t\t\t            }\n\t\t\t        },\n\t\t\t        axisTick: { show: false },\n\t\t\t        axisLine: { \n\t\t\t            show: true,\n\t\t\t            lineStyle:{\n\t\t\t                color:'#3b73f5'\n\t\t\t            }\n\t\t\t        },\n\t\t\t    },\n\t\t\t    series: [\n\t\t\t        {\n\t\t\t            name: '已售票数',\n\t\t\t            type: 'bar',\n\t\t\t            stack: '总量',\n\t\t\t            barWidth: 30,\n\t\t\t            itemStyle:{\n\t\t\t                normal: {\n\t\t\t                    color: '#89afff',\n\t\t\t                }\n\t\t\t            },\n\t\t\t            label: {\n\t\t\t                normal: {\n\t\t\t                    show: true,\n\t\t\t                    position:'inside'\n\t\t\t                }\n\t\t\t            },\n\t\t\t            z:  10,\n\t\t\t            data: saled\n\t\t\t        },\n\t\t\t        {\n\t\t\t            name: '未售票数',\n\t\t\t            type: 'bar',\n\t\t\t            stack: '总量',\n\t\t\t            itemStyle:{\n\t\t\t                normal: {\n\t\t\t                    color: '#8ed6f4'\n\t\t\t                }\n\t\t\t            },\n\t\t\t            label: {\n\t\t\t                normal: {\n\t\t\t                    show: true,\n\t\t\t                    position: 'inside',\n\t\t\t                    textStyle:{\n\t\t\t                        color:'#7375ff'\n\t\t\t                    }\n\t\t\t                }\n\t\t\t            },\n\t\t\t            z: 5,\n\t\t\t            data: surplus\n\t\t\t        },\n\t\t\t    ]\n\t\t\t};\n\t\t\t  \n\t\t\t  // if (myChart == null) {\n\t\t\t  //           myChart = this.$echarts.init(this.$refs[this.chartObj.type]);\n\t\t\t  //         }\n\t\t\t  //         myChart.setOption(option);\n\t\t\tif(option){\n\t\t\tmyChart.setOption(option);\n\t\t\t}\n\t\t},\n\t\t//绘制每天城市发出班次统计图\n\t\tdrawCharts2(shifts){\n\t\t\t// 基于准备好的dom，初始化echarts实例\n\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsShift'))\n\t\t\tlet option = {\n\t\t\t  title: {\n\t\t\t    text: '每日城市发出班次分布图',\n\t\t\t    left: 'center'\n\t\t\t  },\n\t\t\t  tooltip: {\n\t\t\t    trigger: 'item'\n\t\t\t  },\n\t\t\t  legend: {\n\t\t\t    orient: 'vertical',\n\t\t\t    left: 'left'\n\t\t\t  },\n\t\t\t  series: [\n\t\t\t    {\n\t\t\t      name: 'Access From',\n\t\t\t      type: 'pie',\n\t\t\t      radius: '60%',\n\t\t\t      data:shifts,\n\t\t\t      emphasis: {\n\t\t\t        itemStyle: {\n\t\t\t          shadowBlur: 10,\n\t\t\t          shadowOffsetX: 0,\n\t\t\t          shadowColor: 'rgba(0, 0, 0, 0.5)'\n\t\t\t        }\n\t\t\t      }\n\t\t\t    }\n\t\t\t  ]\n\t\t\t};\n\t\t\t\tmyChart.setOption(option);\n\t\t},\n\t\t//获取每天售票统计数据\n\t\tgetData(){\n\t\t\tconst that = this;\n\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/daySale?date=\"+that.date).then(res =>{\n\t\t\t\tthat.line = res.data.data.line;\n\t\t\t\tthat.saled = res.data.data.saled;\n\t\t\t\tthat.surplus = res.data.data.surplus;\n\t\t\t\tthat.drawCharts(that.line,that.saled,that.surplus)\n\t\t\t})\n\t\t},\n\t\t//获取每天城市发出班次统计数据\n\t\tgetData2(){\n\t\t\tconst that = this;\n\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/dayShift?date=\"+that.date).then(res =>{\n\t\t\t\tthat.shifts = res.data.data;\n\t\t\t\tthat.drawCharts2(that.shifts);\n\t\t\t})\n\t\t},\n\t\t//点击确认按钮，执行获取数据的方法，并绘制两个统计图\n\t\tcinfirm(){\n\t\t\tconsole.log(this.date)\n\t\t\tthis.getData();\n\t\t\tthis.getData2();\n\t\t},\n\t\t//获取当前时间并格式化\n\t\tdateFormat(){\n\t\t\tlet date = new Date();\n\t\t\tlet year = date.getFullYear();\n\t\t\tlet month = date.getMonth() + 1;\n\t\t\tlet day = date.getDate();\n\t\t\tif (month < 10) {\n\t\t\t    month = \"0\" + month;\n\t\t\t}\n\t\t\tif (day < 10) {\n\t\t\t    day = \"0\" + day;\n\t\t\t}\n\t\t\tlet nowDate = year + \"-\" + month + \"-\" + day; \n\t\t\tthis.date = nowDate;\n\t\t}\n\t},\n\t//生命周期函数，默认刚进入页面加载今天的统计数据对应的统计图\n\tmounted(){\n\t\tthis.dateFormat();\n\t\tthis.getData();\n\t\tthis.getData2();\n\t\tthis.drawCharts(this.line,this.saled,this.surplus);\n\t\tthis.drawCharts2(this.shifts);\n\t}\n}\n",{"version":3,"sources":["Statistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Statistics.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"statistics\" style=\"width: 100%;\">\r\n\t\t<div class=\"top\">\r\n\t\t\t统计分析\r\n\t\t</div>\r\n\t\t<div class=\"center\" align=\"center\" style=\"height: 100%;margin: auto;width: 100%;\">\r\n\t\t<!-- 日期选择 -->\r\n\t\t<div id=\"selectDate\">\r\n\t\t\t<span style=\"color: #9bc9c9;\">\r\n\t\t\t\t请选择查看日期\r\n\t\t\t</span><br>\r\n\t\t\t<!-- <input type=\"date\" v-model=\"date\"/> -->\r\n\t\t\t<el-date-picker\r\n\t\t\tv-model=\"date\"\r\n\t\t\t      type=\"date\"\r\n\t\t\t\t  value-format=\"yyyy-MM-dd\">\r\n\t\t\t</el-date-picker>&nbsp;\r\n\t\t\t<el-button type=\"primary\" @click=\"cinfirm()\">确认</el-button>\r\n\t\t</div><br>\r\n\t\t<!-- 每天售票统计图容器 -->\r\n\t\t<!-- <el-tag type=\"info\">每日票务售卖情况柱状图</el-tag> -->\r\n\t\t<span style=\"font-weight:bold\">每日票务售卖情况柱状图</span>\r\n\t\t\r\n\t\t\t<div id=\"statisticsTicket\" style=\"width: 800px;height: 400px;\">\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t\t\t<!-- 每天城市发出班次统计图容器 -->\r\n\t\t<div id=\"statisticsShift\" style=\"width: 600px;height: 400px;\">\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn{\r\n\t\t\t\t//日期参数\r\n\t\t\t\tdate:'',\r\n\t\t\t\t//每天售票统计数据，分别为路线，已售票数，未售票数（即剩余票数）\r\n\t\t\t\tline:[],\r\n\t\t\t\tsaled:[],\r\n\t\t\t\tsurplus:[],\r\n\t\t\t\t//每天城市发出班次统计数据\r\n\t\t\t\tshifts:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmethods:{\r\n\t\t\t//绘制每天售票情况统计图\r\n\t\t\tdrawCharts(line,saled,surplus){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t // 基于准备好的dom，初始化echarts实例\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsTicket'));\r\n\t\t\t\t\r\n\t\t\t\tlet  option = {\r\n\t\t\t\t    backgroundColor:'#f5fffe',\r\n\t\t\t\t    tooltip:{\r\n\t\t\t\t      trigger:'axis'  \r\n\t\t\t\t    },\r\n\t\t\t\t    legend: {\r\n\t\t\t\t        data: ['已售票数', '未售票数'],\r\n\t\t\t\t        textStyle:{\r\n\t\t\t\t            color:'#02c4ef'\r\n\t\t\t\t        }\r\n\t\t\t\t    },\r\n\t\t\t\t    grid: {\r\n\t\t\t\t        left: '3%',\r\n\t\t\t\t        right: '4%',\r\n\t\t\t\t        bottom: '3%',\r\n\t\t\t\t        containLabel: true\r\n\t\t\t\t    },\r\n\t\t\t\t    xAxis:  {\r\n\t\t\t\t        type: 'category',\r\n\t\t\t\t        data: line,\r\n\t\t\t\t        axisTick: { show: false },\r\n\t\t\t\t        axisLine: {\r\n\t\t\t\t            show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#58f1f3'\r\n\t\t\t\t            },\r\n\t\t\t\t        },\r\n\t\t\t\t        axisLabel: { \r\n\t\t\t\t            show:true,\r\n\t\t\t\t            textStyle:{\r\n\t\t\t\t                color:'#215ae0',\r\n\t\t\t\t                fontSize:12,\r\n\t\t\t\t            },\r\n\t\t\t\t            //rotate:30\r\n\t\t\t\t        }\r\n\t\t\t\t    },\r\n\t\t\t\t    yAxis: {\r\n\t\t\t\t        type: 'value',\r\n\t\t\t\t        splitLine: {show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#a5ffff'\r\n\t\t\t\t            }\r\n\t\t\t\t        },\r\n\t\t\t\t        axisTick: { show: false },\r\n\t\t\t\t        axisLine: { \r\n\t\t\t\t            show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#3b73f5'\r\n\t\t\t\t            }\r\n\t\t\t\t        },\r\n\t\t\t\t    },\r\n\t\t\t\t    series: [\r\n\t\t\t\t        {\r\n\t\t\t\t            name: '已售票数',\r\n\t\t\t\t            type: 'bar',\r\n\t\t\t\t            stack: '总量',\r\n\t\t\t\t            barWidth: 30,\r\n\t\t\t\t            itemStyle:{\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    color: '#89afff',\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            label: {\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    show: true,\r\n\t\t\t\t                    position:'inside'\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            z:  10,\r\n\t\t\t\t            data: saled\r\n\t\t\t\t        },\r\n\t\t\t\t        {\r\n\t\t\t\t            name: '未售票数',\r\n\t\t\t\t            type: 'bar',\r\n\t\t\t\t            stack: '总量',\r\n\t\t\t\t            itemStyle:{\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    color: '#8ed6f4'\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            label: {\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    show: true,\r\n\t\t\t\t                    position: 'inside',\r\n\t\t\t\t                    textStyle:{\r\n\t\t\t\t                        color:'#7375ff'\r\n\t\t\t\t                    }\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            z: 5,\r\n\t\t\t\t            data: surplus\r\n\t\t\t\t        },\r\n\t\t\t\t    ]\r\n\t\t\t\t};\r\n\t\t\t\t  \r\n\t\t\t\t  // if (myChart == null) {\r\n\t\t\t\t  //           myChart = this.$echarts.init(this.$refs[this.chartObj.type]);\r\n\t\t\t\t  //         }\r\n\t\t\t\t  //         myChart.setOption(option);\r\n\t\t\t\tif(option){\r\n\t\t\t\tmyChart.setOption(option);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//绘制每天城市发出班次统计图\r\n\t\t\tdrawCharts2(shifts){\r\n\t\t\t\t// 基于准备好的dom，初始化echarts实例\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsShift'))\r\n\t\t\t\tlet option = {\r\n\t\t\t\t  title: {\r\n\t\t\t\t    text: '每日城市发出班次分布图',\r\n\t\t\t\t    left: 'center'\r\n\t\t\t\t  },\r\n\t\t\t\t  tooltip: {\r\n\t\t\t\t    trigger: 'item'\r\n\t\t\t\t  },\r\n\t\t\t\t  legend: {\r\n\t\t\t\t    orient: 'vertical',\r\n\t\t\t\t    left: 'left'\r\n\t\t\t\t  },\r\n\t\t\t\t  series: [\r\n\t\t\t\t    {\r\n\t\t\t\t      name: 'Access From',\r\n\t\t\t\t      type: 'pie',\r\n\t\t\t\t      radius: '60%',\r\n\t\t\t\t      data:shifts,\r\n\t\t\t\t      emphasis: {\r\n\t\t\t\t        itemStyle: {\r\n\t\t\t\t          shadowBlur: 10,\r\n\t\t\t\t          shadowOffsetX: 0,\r\n\t\t\t\t          shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n\t\t\t\t        }\r\n\t\t\t\t      }\r\n\t\t\t\t    }\r\n\t\t\t\t  ]\r\n\t\t\t\t};\r\n\t\t\t\t\tmyChart.setOption(option);\r\n\t\t\t},\r\n\t\t\t//获取每天售票统计数据\r\n\t\t\tgetData(){\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/daySale?date=\"+that.date).then(res =>{\r\n\t\t\t\t\tthat.line = res.data.data.line;\r\n\t\t\t\t\tthat.saled = res.data.data.saled;\r\n\t\t\t\t\tthat.surplus = res.data.data.surplus;\r\n\t\t\t\t\tthat.drawCharts(that.line,that.saled,that.surplus)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取每天城市发出班次统计数据\r\n\t\t\tgetData2(){\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/dayShift?date=\"+that.date).then(res =>{\r\n\t\t\t\t\tthat.shifts = res.data.data;\r\n\t\t\t\t\tthat.drawCharts2(that.shifts);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//点击确认按钮，执行获取数据的方法，并绘制两个统计图\r\n\t\t\tcinfirm(){\r\n\t\t\t\tconsole.log(this.date)\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.getData2();\r\n\t\t\t},\r\n\t\t\t//获取当前时间并格式化\r\n\t\t\tdateFormat(){\r\n\t\t\t\tlet date = new Date();\r\n\t\t\t\tlet year = date.getFullYear();\r\n\t\t\t\tlet month = date.getMonth() + 1;\r\n\t\t\t\tlet day = date.getDate();\r\n\t\t\t\tif (month < 10) {\r\n\t\t\t\t    month = \"0\" + month;\r\n\t\t\t\t}\r\n\t\t\t\tif (day < 10) {\r\n\t\t\t\t    day = \"0\" + day;\r\n\t\t\t\t}\r\n\t\t\t\tlet nowDate = year + \"-\" + month + \"-\" + day; \r\n\t\t\t\tthis.date = nowDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//生命周期函数，默认刚进入页面加载今天的统计数据对应的统计图\r\n\t\tmounted(){\r\n\t\t\tthis.dateFormat();\r\n\t\t\tthis.getData();\r\n\t\t\tthis.getData2();\r\n\t\t\tthis.drawCharts(this.line,this.saled,this.surplus);\r\n\t\t\tthis.drawCharts2(this.shifts);\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.top {\r\n\t\t/* margin-top: 10px; */\r\n\t\tmargin: auto;\r\n\t\tfont-size: 39px;\r\n\t\tcolor: rgb(151, 148, 253);\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\theight: 50px;\r\n\t\t/* background-color: rgb(253, 255, 254); */\r\n\t}\r\n</style>\r\n"]}]}