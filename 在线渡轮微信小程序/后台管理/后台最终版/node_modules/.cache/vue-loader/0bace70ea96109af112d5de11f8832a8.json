{"remainingRequest":"D:\\企业\\实训\\vue\\后台\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\企业\\实训\\vue\\后台\\src\\components\\Statistics.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\企业\\实训\\vue\\后台\\src\\components\\Statistics.vue","mtime":1656123452919},{"path":"D:\\企业\\实训\\vue\\后台\\node_modules\\css-loader\\index.js","mtime":1654243307080},{"path":"D:\\企业\\实训\\vue\\后台\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1654243317953},{"path":"D:\\企业\\实训\\vue\\后台\\node_modules\\postcss-loader\\src\\index.js","mtime":1654243319008},{"path":"D:\\企业\\实训\\vue\\后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654243311876},{"path":"D:\\企业\\实训\\vue\\后台\\node_modules\\vue-loader\\lib\\index.js","mtime":1654243317945}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.top {\n\t/* margin-top: 10px; */\n\tmargin: auto;\n\tfont-size: 34px;\n\tcolor: rgb(154, 217, 217);\n\tfont-weight: bold;\n\ttext-align: center;\n\theight: 50px;\n\t/* background-color: rgb(253, 255, 254); */\n}\n",{"version":3,"sources":["Statistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Statistics.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"statistics\">\r\n\t\t<!-- 日期选择 -->\r\n\t\t<div class=\"top\">\r\n\t\t\t查询用户\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<el-card class=\"center\" align=\"center\" style=\"height: 900px;margin: auto;width: 820px;\">\r\n\t\t\t<div id=\"selectDate\">\r\n\t\t    <span class=\"demonstration\" style=\"color: rgb(147,161,161);\">请选择需要查看的日期</span><br>\r\n\t\t    <el-date-picker\r\n\t\t      v-model=\"date\"\r\n\t\t      type=\"date\"\r\n\t\t      placeholder=\"选择日期\">\r\n\t\t    </el-date-picker>&nbsp\r\n\t\t\t<el-button type=\"primary\" @click=\"cinfirm()\">确认</el-button>\r\n\t\t  </div><br>\r\n\t\t<!-- 每天售票统计图容器 -->\r\n\t\t<div id=\"statisticsTicket\" style=\"width: 600px;height: 400px;\">\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<!-- 每天城市发出班次统计图容器 -->\r\n\t\t<div id=\"statisticsShift\" style=\"width: 600px;height: 400px;\">\r\n\t\t\t\r\n\t\t</div>\r\n\t\t</el-card>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\n</template>\n\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn{\r\n\t\t\t\t//日期参数\r\n\t\t\t\tdate:'',\r\n\t\t\t\t//每天售票统计数据，分别为路线，已售票数，未售票数（即剩余票数）\r\n\t\t\t\tline:[],\r\n\t\t\t\tsaled:[],\r\n\t\t\t\tsurplus:[],\r\n\t\t\t\t//每天城市发出班次统计数据\r\n\t\t\t\tshifts:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tvar rateChart;//全局变量\r\n\t\t\tfunction rate_fold(comPany,dataMon,nowSeries){\r\n\t\t\t    if (rateChart != null && rateChart != \"\" && rateChart != undefined) {\r\n\t\t\t        rateChart.dispose();//销毁\r\n\t\t\t    }\r\n\t\t\t    rateChart = echarts.init(document.getElementById('rate_fold_line'));//初始化\r\n\t\t\t    var option = {title: {text: \"大用户成功率\"},tooltip: {trigger: 'axis'},\r\n\t\t\t                  legend: {data: comPany,orient:'vertical',x: 'right',y: 'center'},\r\n\t\t\t                  calculable: true,xAxis: [{type: 'category',boundaryGap: false,\r\n\t\t\t                  data: dataMon,axisLabel: {rotate: 50}}],\r\n\t\t\t                  yAxis: [{type: 'value',max: 100,min: 98,splitNumber:7}],\r\n\t\t\t                  series: nowSeries};\r\n\t\t\t    rateChart.setOption(option);\r\n\t\t\t}\r\n\t\t\t//绘制每天售票情况统计图\r\n\t\t\tdrawCharts(line,saled,surplus){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t // 基于准备好的dom，初始化echarts实例\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsTicket'));\r\n\t\t\t\tlet  option = {\r\n\t\t\t\t    backgroundColor:'#030F35',\r\n\t\t\t\t    tooltip:{\r\n\t\t\t\t      trigger:'axis'  \r\n\t\t\t\t    },\r\n\t\t\t\t    legend: {\r\n\t\t\t\t        data: ['已售票数', '未售票数'],\r\n\t\t\t\t        textStyle:{\r\n\t\t\t\t            color:'#fff'\r\n\t\t\t\t        }\r\n\t\t\t\t    },\r\n\t\t\t\t    grid: {\r\n\t\t\t\t        left: '3%',\r\n\t\t\t\t        right: '4%',\r\n\t\t\t\t        bottom: '3%',\r\n\t\t\t\t        containLabel: true\r\n\t\t\t\t    },\r\n\t\t\t\t    xAxis:  {\r\n\t\t\t\t        type: 'category',\r\n\t\t\t\t        data: line,\r\n\t\t\t\t        axisTick: { show: false },\r\n\t\t\t\t        axisLine: {\r\n\t\t\t\t            show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#01F3F5'\r\n\t\t\t\t            },\r\n\t\t\t\t        },\r\n\t\t\t\t        axisLabel: { \r\n\t\t\t\t            show:true,\r\n\t\t\t\t            textStyle:{\r\n\t\t\t\t                color:'#01F3F5',\r\n\t\t\t\t                fontSize:12,\r\n\t\t\t\t            },\r\n\t\t\t\t            //rotate:30\r\n\t\t\t\t        }\r\n\t\t\t\t    },\r\n\t\t\t\t    yAxis: {\r\n\t\t\t\t        type: 'value',\r\n\t\t\t\t        splitLine: {show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#04295E'\r\n\t\t\t\t            }\r\n\t\t\t\t        },\r\n\t\t\t\t        axisTick: { show: false },\r\n\t\t\t\t        axisLine: { \r\n\t\t\t\t            show: true,\r\n\t\t\t\t            lineStyle:{\r\n\t\t\t\t                color:'#01F3F5'\r\n\t\t\t\t            }\r\n\t\t\t\t        },\r\n\t\t\t\t    },\r\n\t\t\t\t    series: [\r\n\t\t\t\t        {\r\n\t\t\t\t            name: '已售票数',\r\n\t\t\t\t            type: 'bar',\r\n\t\t\t\t            stack: '总量',\r\n\t\t\t\t            barWidth: 30,\r\n\t\t\t\t            itemStyle:{\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    color: '#6601FF',\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            label: {\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    show: true,\r\n\t\t\t\t                    position:'inside'\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            z:  10,\r\n\t\t\t\t            data: saled\r\n\t\t\t\t        },\r\n\t\t\t\t        {\r\n\t\t\t\t            name: '未售票数',\r\n\t\t\t\t            type: 'bar',\r\n\t\t\t\t            stack: '总量',\r\n\t\t\t\t            itemStyle:{\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    color: '#00F0FF'\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            label: {\r\n\t\t\t\t                normal: {\r\n\t\t\t\t                    show: true,\r\n\t\t\t\t                    position: 'inside',\r\n\t\t\t\t                    textStyle:{\r\n\t\t\t\t                        color:'#6601FF'\r\n\t\t\t\t                    }\r\n\t\t\t\t                }\r\n\t\t\t\t            },\r\n\t\t\t\t            z: 5,\r\n\t\t\t\t            data: surplus\r\n\t\t\t\t        },\r\n\t\t\t\t    ]\r\n\t\t\t\t};\r\n\t\t\t\t  \r\n\t\t\t\tif(option){\r\n\t\t\t\tmyChart.setOption(option);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//绘制每天城市发出班次统计图\r\n\t\t\tdrawCharts2(shifts){\r\n\t\t\t\t// 基于准备好的dom，初始化echarts实例\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById('statisticsShift'))\r\n\t\t\t\tlet option = {\r\n\t\t\t\t  title: {\r\n\t\t\t\t    text: '每日城市发出班次分布图',\r\n\t\t\t\t    left: 'center'\r\n\t\t\t\t  },\r\n\t\t\t\t  tooltip: {\r\n\t\t\t\t    trigger: 'item'\r\n\t\t\t\t  },\r\n\t\t\t\t  legend: {\r\n\t\t\t\t    orient: 'vertical',\r\n\t\t\t\t    left: 'left'\r\n\t\t\t\t  },\r\n\t\t\t\t  series: [\r\n\t\t\t\t    {\r\n\t\t\t\t      name: 'Access From',\r\n\t\t\t\t      type: 'pie',\r\n\t\t\t\t      radius: '50%',\r\n\t\t\t\t      data:shifts,\r\n\t\t\t\t      emphasis: {\r\n\t\t\t\t        itemStyle: {\r\n\t\t\t\t          shadowBlur: 10,\r\n\t\t\t\t          shadowOffsetX: 0,\r\n\t\t\t\t          shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n\t\t\t\t        }\r\n\t\t\t\t      }\r\n\t\t\t\t    }\r\n\t\t\t\t  ]\r\n\t\t\t\t};\r\n\t\t\t\t\tmyChart.setOption(option);\r\n\t\t\t},\r\n\t\t\t//获取每天售票统计数据\r\n\t\t\tgetData(){\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/daySale?date=\"+that.date).then(res =>{\r\n\t\t\t\t\tthat.line = res.data.data.line;\r\n\t\t\t\t\tthat.saled = res.data.data.saled;\r\n\t\t\t\t\tthat.surplus = res.data.data.surplus;\r\n\t\t\t\t\tthat.drawCharts(that.line,that.saled,that.surplus)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取每天城市发出班次统计数据\r\n\t\t\tgetData2(){\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tthis.$axios.get(\"http://localhost:8888/statistics/dayShift?date=\"+that.date).then(res =>{\r\n\t\t\t\t\tthat.shifts = res.data.data;\r\n\t\t\t\t\tthat.drawCharts2(that.shifts);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//点击确认按钮，执行获取数据的方法，并绘制两个统计图\r\n\t\t\tcinfirm(){\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.getData2();\r\n\t\t\t},\r\n\t\t\t//获取当前时间并格式化\r\n\t\t\tdateFormat(){\r\n\t\t\t\tlet date = new Date();\r\n\t\t\t\tlet year = date.getFullYear();\r\n\t\t\t\tlet month = date.getMonth() + 1;\r\n\t\t\t\tlet day = date.getDate();\r\n\t\t\t\tif (month < 10) {\r\n\t\t\t\t    month = \"0\" + month;\r\n\t\t\t\t}\r\n\t\t\t\tif (day < 10) {\r\n\t\t\t\t    day = \"0\" + day;\r\n\t\t\t\t}\r\n\t\t\t\tlet nowDate = year + \"-\" + month + \"-\" + day; \r\n\t\t\t\tthis.date = nowDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//生命周期函数，默认刚进入页面加载今天的统计数据对应的统计图\r\n\t\tmounted(){\r\n\t\t\tthis.dateFormat();\r\n\t\t\tthis.drawCharts();\r\n\t\t\tthis.drawCharts2();\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t.top {\r\n\t\t/* margin-top: 10px; */\r\n\t\tmargin: auto;\r\n\t\tfont-size: 34px;\r\n\t\tcolor: rgb(154, 217, 217);\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\theight: 50px;\r\n\t\t/* background-color: rgb(253, 255, 254); */\r\n\t}\n</style>\n"]}]}